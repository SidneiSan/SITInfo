@model MyFactory.SITInfo.Models.Chamado
    @{ 
    ViewBag.Title = "Exclusão de Chamados";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="modal-body">
    <div class="">
        <span class="glyphicon glyphicon-warning-sign"></span>

        <br />
        <div id="div_nome" class="hidden">
            <p id="textoNome">Nome: @Model.DataAbertura</p>


            <p id="textoEmail">Email: @Model.EmailUsuario</p>


            <p id="textoConta">Tipo da Conta:@Model.Titulo</p>
        </div>

        @using (Html.BeginForm("Delete", "Chamados", new { id = Model.id }, FormMethod.Post, null))
        {
            @Html.AntiForgeryToken()
            <div class="row">
                &nbsp;
            </div>
            <div class="row hidden">
                <div class="col-md-4 col-md-offset-4">
                    <button type="button" id="cancel-btn" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                    <button type="submit" id="approve-btn" class="btn btn-danger">Confirmar</button>
                </div>
            </div>
        }

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/4.4.0/bootbox.min.js"></script>

        <script>
            var nome = $("#textoNome").val();
            console.log("Nome =>" + nome);
            bootbox.confirm({
                title: "Confirma a exclusão deste Chamado ?",
                message: document.getElementById("textoNome").innerHTML + '<br/>' + document.getElementById("textoEmail").innerHTML + '<br/>' + document.getElementById("textoConta").innerHTML,
                buttons: {
                    confirm: {
                        label: 'Sim',
                        className: 'btn-success'
                    },
                    cancel: {
                        label: 'Não',
                        className: 'btn-danger'
                    }
                },
                callback: function (result) {
                    $('#modal-container').modal('hide');
                    if (result) {

                        $("#approve-btn").click();
                    } else {
                        $("#cancel-btn").click();
                        history.back();
                        //$.ajax({
                        //    url: "/Usuarios/Index",
                        //    datatype: 'json',
                        //    type: "POST"
                        //});
                        //console.log("naooooooooooooo!!");
                    }



                }
            });
        </script>




    </div>


